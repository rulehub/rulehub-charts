---
suite: Kyverno single policy smoke

templates:
  - templates/policy-sets.yaml

tests:
  - it: Only block-hostpath policy enabled => others absent
    set:
      kyverno:
        enabled: true
        policies:
          block-hostpath:
            enabled: true
          disallow-latest:
            enabled: false
          require-resources:
            enabled: false
    asserts:
      - isNotNull:
          path: spec.kyverno.policies.block-hostpath
      - isNull: # another common policy should NOT appear
          path: spec.kyverno.policies.disallow-latest
      - isNull: # and another
          path: spec.kyverno.policies.require-resources
